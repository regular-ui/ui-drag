!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("regularjs")):"function"==typeof define&&define.amd?define(["Regular"],e):"object"==typeof exports?exports.RGUI=e(require("regularjs")):t.RGUI=e(t.Regular)}(this,function(t){return function(t){function e(n){if(o[n])return o[n].exports;var a=o[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){o(1),t.exports=o(1)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(2);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var a=o(8);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})})},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e._=e.Component=void 0;var a=o(3),i=n(a),r=o(7),s=n(r);e.Component=i["default"],e._=s["default"]},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(4),i=n(a),r=o(5),s=n(r),d=o(6),l=n(d),u=o(7),f=n(u),c=i["default"].extend({config:function(){this.defaults({readonly:!1,disabled:!1,visible:!0,"class":""}),this.supr()},defaults:function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return f["default"].defaults.apply(f["default"],[this.data].concat(e))},watch:function(){}}).filter(s["default"]).directive(l["default"]);e["default"]=c},function(e,o){e.exports=t},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={};o.dateFormat=function(){var t=function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return t+="",t.length<=1?"0"+t:t},e={yyyy:function(t){return t.getFullYear()},MM:function(e){return t(e.getMonth()+1)},dd:function(e){return t(e.getDate())},HH:function(e){return t(e.getHours())},mm:function(e){return t(e.getMinutes())},ss:function(e){return t(e.getSeconds())}},o=new RegExp(Object.keys(e).join("|"),"g");return function(t){var n=arguments.length<=1||void 0===arguments[1]?"yyyy-MM-dd HH:mm":arguments[1];return t?(t=new Date(t),n.replace(o,function(o){return e[o]?e[o](t):""})):""}}(),o.format=function(t,e){for(var n=arguments.length,a=Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return o[e+"Format"].apply(o,[t].concat(a))},e["default"]=o},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(7),i=n(a),r={};r["z-crt"]=i["default"].createBoolClassDirective("z-crt"),r["z-sel"]=i["default"].createBoolClassDirective("z-sel"),r["z-chk"]=i["default"].createBoolClassDirective("z-chk"),r["z-act"]=i["default"].createBoolClassDirective("z-act"),r["z-dis"]=i["default"].createBoolClassDirective("z-dis"),r["r-show"]=i["default"].createBoolDirective(function(t,e){t.style.display=e?"block":""}),r["r-autofocus"]=i["default"].createBoolDirective(function(t,e){e&&setTimeout(function(){return t.focus()},0)}),e["default"]=r},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=o(4),i={defaults:function(t){for(var e=arguments.length,o=Array(e>1?e-1:0),n=1;n<e;n++)o[n-1]=arguments[n];return o.forEach(function(e){for(var o in e)e.hasOwnProperty(o)&&void 0===t[o]&&(t[o]=e[o])}),t},createBoolDirective:function(t){return function(e,o){var a=this;"object"===("undefined"==typeof o?"undefined":n(o))&&"expression"===o.type?this.$watch(o,function(o,n){!o!=!n&&t.call(a,e,o)}):(o||""===o)&&t.call(this,e,!0)}},createBoolClassDirective:function(t){return i.createBoolDirective(function(e,o){a.dom[o?"addClass":"delClass"](e,t)})}};e["default"]=i},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Movable=e.Droppable=e.Draggable=void 0;var a=o(9),i=n(a),r=o(12),s=n(r),d=o(13),l=n(d);e.Draggable=i["default"],e.Droppable=s["default"],e.Movable=l["default"]},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(2),i=o(10),r=n(i),s=o(4),d=a.Component.extend({name:"draggable",template:"{#inc this.$body}",config:function(){this.defaults({proxy:"clone",value:void 0,"class":"z-draggable",sourceClass:"z-dragSource",proxyClass:"z-dragProxy"}),this.supr(),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this.cancel=this.cancel.bind(this)},init:function(){var t=this,e=s.dom.element(this);s.dom.on(e,"mousedown",this._onMouseDown),this.supr(),this.$watch("disabled",function(o){return s.dom[o?"delClass":"addClass"](e,t.data["class"])})},_getProxy:function(){var t=void 0,e=s.dom.element(this);if("function"==typeof this.data.proxy)t=this.data.proxy();else if(this.data.proxy instanceof Element)t=this.data.proxy;else if("self"===this.data.proxy)t=e;else if("clone"===this.data.proxy){t=e.cloneNode(!0),this._setProxyFixed(t,s.dom.getPosition(e));var o=s.dom.getSize(e);t.style.width=o.width+"px",t.style.height=o.height+"px",e.parentElement.appendChild(t)}else this.data.proxy instanceof d.Proxy&&(t=s.dom.element(this.data.proxy.$body()),this._setProxyFixed(t,s.dom.getPosition(e)),document.body.appendChild(t));return t&&this._initProxy(t),t},_setProxyFixed:function(t){var e=arguments.length<=1||void 0===arguments[1]?{left:0,top:0}:arguments[1];t.style.left=e.left+"px",t.style.top=e.top+"px",t.style.zIndex="9999",t.style.position="fixed",t.style.display=""},_initProxy:function(t){"static"===s.dom.getComputedStyle(t,"position")&&(t.style.position="relative")},_onMouseDown:function(t){if(!this.data.disabled){var e=t.event;t.preventDefault(),Object.assign(r["default"],{screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,startX:e.clientX,startY:e.clientY,dragX:0,dragY:0}),s.dom.on(window,"mousemove",this._onMouseMove),s.dom.on(window,"mouseup",this._onMouseUp)}},_onMouseMove:function(t){var e=t.event;t.preventDefault(),Object.assign(r["default"],{screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,dragX:e.clientX-r["default"].startX,dragY:e.clientY-r["default"].startY}),r["default"].dragging===!1?this._onMouseMoveStart(e):this._onMouseMoving(e)},_onMouseMoveStart:function(t,e){var o=this._getProxy(),n=o?s.dom.getComputedStyle(o):{};n.left&&"auto"!==n.left||(n.left="0px"),n.top&&"auto"!==n.top||(n.top="0px"),Object.assign(r["default"],{dragging:!0,proxy:o,value:this.data.value,startLeft:+n.left.slice(0,-2),startTop:+n.top.slice(0,-2),droppable:void 0}),r["default"].left=r["default"].startLeft,r["default"].top=r["default"].startTop,!e&&this._dragStart()},_onMouseMoving:function(t){var e=this.restrict(r["default"]);if(r["default"].proxy&&(r["default"].proxy.style.left=e.left+"px",r["default"].proxy.style.top=e.top+"px"),r["default"].left=e.left,r["default"].top=e.top,this._drag(),r["default"].dragging){var o=null;r["default"].proxy?(r["default"].proxy.style.display="none",o=document.elementFromPoint(t.clientX,t.clientY),r["default"].proxy.style.display=""):o=document.elementFromPoint(t.clientX,t.clientY);for(var n=null;o&&!(n=r["default"].droppables.find(function(t){return s.dom.element(t)===o}));)o=o.parentElement;if(r["default"].droppable!==n){if(r["default"].droppable&&r["default"].droppable._dragLeave(this),!r["default"].dragging)return;if(n&&n._dragEnter(this),!r["default"].dragging)return;r["default"].droppable=n}n&&n._dragOver(this)}},restrict:function(t){return{left:t.startLeft+t.dragX,top:t.startTop+t.dragY}},_onMouseUp:function(t){r["default"].dragging&&(r["default"].droppable&&r["default"].droppable._drop(this),this.cancel()),s.dom.off(window,"mousemove",this._onMouseMove),s.dom.off(window,"mouseup",this._onMouseUp)},cancel:function(){this._dragEnd(),Object.assign(r["default"],{dragging:!1,value:void 0,proxy:void 0,range:void 0,screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,startX:0,startY:0,dragX:0,dragY:0,startLeft:0,startTop:0,left:0,top:0,droppable:void 0})},_dragStart:function(){var t=s.dom.element(this);s.dom.addClass(t,this.data.sourceClass),r["default"].proxy&&s.dom.addClass(r["default"].proxy,this.data.proxyClass),this.$emit("dragstart",Object.assign({sender:this,origin:this,source:t,cancel:this.cancel},r["default"]))},_drag:function(){this.$emit("drag",Object.assign({sender:this,origin:this,source:s.dom.element(this),cancel:this.cancel},r["default"]))},_dragEnd:function(){var t=null!==this._watchers?s.dom.element(this):null;t&&s.dom.delClass(t,this.data.sourceClass),this.$emit("dragend",Object.assign({sender:this,origin:this,source:t},r["default"])),r["default"].proxy&&((this.data.proxy instanceof d.Proxy||"clone"===this.data.proxy)&&r["default"].proxy.parentElement.removeChild(r["default"].proxy),s.dom.delClass(r["default"].proxy,this.data.proxyClass))}});d.Proxy=a.Component.extend({name:"draggable.proxy",init:function(){this.$outer instanceof d&&(this.$outer.data.proxy=this)}}),e["default"]=d},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o(11);var n={dragging:!1,value:void 0,proxy:void 0,screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,startX:0,startY:0,dragX:0,dragY:0,startLeft:0,startTop:0,dragLeft:0,dragTop:0,droppable:void 0,droppables:[]};e["default"]=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(4);Object.assign(n.dom,{getPosition:function(t){var e=t&&t.ownerDocument,o=e.documentElement,n=e.body,a=t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0},i=o.clientLeft||n.clientLeft||0,r=o.clientTop||n.clientTop||0;return{left:a.left-i,top:a.top-r}},getSize:function(t){var e=arguments.length<=1||void 0===arguments[1]?"outside":arguments[1];return"inside"===e?{width:t.clientWidth,height:t.clientHeight}:"center"===e?{width:(t.clientWidth+t.offsetWidth)/2,height:(t.offsetHeight+t.clientHeight)/2}:"outside"===e?{width:t.offsetWidth,height:t.offsetHeight}:void 0},getDimension:function(t,e){return Object.assign(this.getSize(t,e),this.getPosition(t))},isInRect:function(t,e){return!(!t||!e)&&(t.left>e.left&&t.left<e.left+e.width&&t.top>e.top&&t.top<e.top+e.height)},getComputedStyle:function(t,e){var o=t.currentStyle||window.getComputedStyle(t,null);return e?o[e]:o}}),e["default"]=n.dom},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(2),i=o(10),r=n(i),s=o(4),d=a.Component.extend({name:"droppable",template:"{#inc this.$body}",config:function(){this.defaults({data:null,"class":"z-droppable",dragTarget:"z-dragTarget"}),this.supr(),r["default"].droppables.push(this)},init:function(){var t=this,e=s.dom.element(this);this.$watch("disabled",function(o){return s.dom[o?"delClass":"addClass"](e,t.data["class"])}),this.supr()},destroy:function(){r["default"].droppables.splice(r["default"].droppables.indexOf(this),1),this.supr()},_dragEnter:function(t){var e=s.dom.element(this);s.dom.addClass(e,this.data.dragTarget),this.$emit("dragenter",Object.assign({sender:this,origin:t,source:s.dom.element(t),target:e,cancel:t.cancel},r["default"]))},_dragLeave:function(t){var e=s.dom.element(this);s.dom.delClass(e,this.data.dragTarget),this.$emit("dragleave",Object.assign({sender:this,origin:t,source:s.dom.element(t),target:e,cancel:t.cancel},r["default"]))},_dragOver:function(t){var e=s.dom.element(this),o=s.dom.getDimension(e);this.$emit("dragover",Object.assign({sender:this,origin:t,source:s.dom.element(t),target:e,ratioX:(r["default"].clientX-o.left)/o.width,ratioY:(r["default"].clientY-o.top)/o.height,cancel:t.cancel},r["default"]))},_drop:function(t){var e=s.dom.element(this);s.dom.delClass(e,this.data.dragTarget);var o=s.dom.getDimension(e);this.data.value=t.data.value,this.$update(),this.$emit("drop",Object.assign({sender:this,origin:t,source:s.dom.element(t),target:e,ratioX:(r["default"].clientX-o.left)/o.width,ratioY:(r["default"].clientY-o.top)/o.height},r["default"]))}});e["default"]=d},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=o(9),r=n(i),s=o(10),d=n(s),l=o(4),u=r["default"].extend({name:"movable",template:"{#inc this.$body}",config:function(){this.defaults({proxy:"self",axis:"both",grid:{x:0,y:0},range:void 0,rangeMode:"inside"}),this.supr()},_getRange:function(t){var e=void 0;if("object"===a(this.data.range))e=this.data.range;else if("function"==typeof this.data.range)e=this.data.range();else if("offsetParent"===this.data.range){"absolute"!==l.dom.getComputedStyle(t,"position")&&(t.style.position="absolute");var o=t.offsetParent;e=Object.assign({left:0,top:0},l.dom.getSize(o,this.data.rangeMode))}else"window"===this.data.range&&("fixed"!==l.dom.getComputedStyle(t,"position")&&(t.style.position="fixed"),e={left:0,top:0,width:window.innerWidth,height:window.innerHeight});return e&&(void 0!==e.width&&void 0!==e.height?(e.right=e.left+e.width,e.bottom=e.top+e.height):void 0!==e.right&&void 0!==e.bottom&&(e.width=e.right-e.left,e.height=e.bottom-e.top)),e},_onMouseMoveStart:function(t){this.supr(t,!0),d["default"].proxy&&(d["default"].range=this._getRange(d["default"].proxy)),this._dragStart()},restrict:function(t){var e=this.supr(t);t.range&&("inside"===this.data.rangeMode?(e.left=Math.min(Math.max(t.range.left,e.left),t.range.right-d["default"].proxy.offsetWidth),e.top=Math.min(Math.max(t.range.top,e.top),t.range.bottom-d["default"].proxy.offsetHeight)):"center"===this.data.rangeMode?(e.left=Math.min(Math.max(t.range.left,e.left),t.range.right),e.top=Math.min(Math.max(t.range.top,e.top),t.range.bottom)):"outside"===this.data.rangeMode&&(e.left=Math.min(Math.max(t.range.left-d["default"].proxy.offsetWidth,e.left),t.range.right),e.top=Math.min(Math.max(t.range.top-d["default"].proxy.offsetHeight,e.top),t.range.bottom)));var o=this.data.grid;return o.x&&(e.left=Math.round(e.left/o.x)*o.x),o.y&&(e.top=Math.round(e.top/o.y)*o.y),"vertical"===this.data.axis&&(e.left=t.startLeft),"horizontal"===this.data.axis&&(e.top=t.startTop),e}});e["default"]=u}])});